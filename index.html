<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Tienda Electrónica</title>
        <link rel="stylesheet" href="./css/styles.css">
    </head>
    <body>
        <header>
            <div class="header-container">
                <h1>Tienda Electrónica</h1>
                <nav>
                    <button id="auth-button"
                        onclick="handleAuthButtonClick()">Iniciar
                        Sesión</button>
                    <button id="register-button"
                        onclick="window.location.href='./vista/register.html'">Registrarse</button>
                    <span id="user-name"></span>
                    <button id="admin-button" style="display: none;"
                        onclick="window.location.href='./vista/vistaAdmin.html'">Vista
                        Administrador</button>
                </nav>
            </div>
        </header>

        <main>
            <div class="filter-container">
                <input type="text" id="search" placeholder="Buscar...">
                <select id="filter-marca">
                    <option value>Marca</option>
                    <!-- Opciones de marcas -->
                </select>
                <select id="filter-tipo">
                    <option value>Tipo</option>
                    <option value="celular">Celular</option>
                    <option value="computadora">Computadora</option>
                </select>
                <button id="apply-filters">Aplicar Filtros</button>
            </div>

            <div class="product-list">
                <!-- Listado de productos -->
            </div>
        </main>

        <script src="./js/script.js"></script>
        <script>
        document.addEventListener("DOMContentLoaded", () => {
            const userName = localStorage.getItem("nombre_usuario");
            const rol = localStorage.getItem("rol");
            const authButton = document.getElementById("auth-button");
            const registerButton = document.getElementById("register-button");

            if (userName) {
                document.getElementById("user-name").textContent = `Bienvenido, ${userName}`;
                authButton.textContent = "Cerrar Sesión";
                authButton.onclick = handleLogout;
                registerButton.style.display = "none"; // Ocultar el botón de registro
            } else {
                authButton.textContent = "Iniciar Sesión";
                authButton.onclick = () => window.location.href = './vista/login.html';
            }

            if (rol === 'admin') {
                document.getElementById("admin-button").style.display = "inline-block";
            }
        });

        function handleLogout() {
            localStorage.removeItem("correo");
            localStorage.removeItem("rol");
            localStorage.removeItem("nombre_usuario");
            window.location.href = 'index.html';
        }

        function handleAuthButtonClick() {
            const userName = localStorage.getItem("nombre_usuario");
            if (userName) {
                handleLogout();
            } else {
                window.location.href = 'index.html';
            }
        }
        </script>
    </body>
</html>